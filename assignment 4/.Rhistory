knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
first_stage <- rlm(flushot ~ treatgroup + genderchild + nationality + agemother + educmother + married + housincome, data = data)
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
((0.7*0.4+0.3*0.6)-(0.4*0.2+0.6*0.5))/(0.7-0.4)
# Load data
data <- read.csv("assignment4.csv")
MDE_target <- -0.05
t_q <- -0.524
t_alpha <- 1.960
p <- 0.8
flu_control <- mean(data[data$treatgroup == 0, 'flu'])
sigma = (1-flu_control)*flu_control
n_flu = ((t_alpha - t_q)/MDE_target)^2*((sigma)/(p*(1-p)))
n_flu
rt <- mean(data[data$treatgroup == 1, 'flushot'])
rt
rc <- mean(data[data$treatgroup == 0, 'flushot'])
rc
sigma = (1-flu_control)*flu_control
n_flu = ((t_alpha - t_q)/(MDE_target*(rt - rc)))^2*((sigma)/(p*(1-p)))
n_flu
data$treatedT <- ifelse(c(data$treatgroup == 1 & data$flushot==1), 1, 0)
data$untreatedT <- ifelse(c(data$treatgroup == 1 & data$flushot==0), 1, 0)
data$treatment <- ifelse(data$treatedT== 1, 1, ifelse(data$untreatedT== 1, 2, 0))
balance <- balance_table(data[, !names(data) %in% c("treatgroup", "flushot", "treatedT", "untreatedT")], "treatment")
balance
model1_robust <- rlm(flu ~ flushot, data = subset(data, data$treatgroup == 1))
model2_robust <- rlm(flu ~ flushot + genderchild + nationality + agemother + educmother + married + housincome, data = subset(data, data$treatgroup == 1))
stargazer(model1_robust, model2_robust)
model3 <- feols(flu ~ 1 | flushot ~ treatgroup, data)
summary(model3)
model4 <- feols(flu ~ genderchild + nationality + agemother + educmother + married + housincome | flushot ~ treatgroup, data)
summary(model4)
first_stage <- rlm(flushot ~ treatgroup + genderchild + nationality + agemother + educmother + married + housincome, data = data)
stargazer(first_stage)
first_stage_try <- lm(flushot ~ treatgroup + genderchild + nationality + agemother + educmother + married + housincome, data = data)
first_stage <- rlm(flushot ~ treatgroup + genderchild + nationality + agemother + educmother + married + housincome, data = data)
stargazer(first_stage)
summary(first_stage_try)
sigma = (1-flu_control)*flu_control
n_flu = ((t_alpha - t_q)/(MDE_target*(rt - rc)))^2*((sigma)/(p*(1-p)))
n_flu
data$treatedT <- ifelse(c(data$treatgroup == 1 & data$flushot==1), 1, 0)
data$untreatedT <- ifelse(c(data$treatgroup == 1 & data$flushot==0), 1, 0)
data$treatment <- ifelse(data$treatedT== 1, 1, ifelse(data$untreatedT== 1, 2, 0))
balance <- balance_table(data[, !names(data) %in% c("treatgroup", "flushot", "treatedT", "untreatedT")], "treatment")
balance
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
library(sandwich)
model2_ols <- lm(flu ~ flushot + genderchild + nationality + agemother + educmother + married + housincome, data = subset(data, data$treatgroup == 1))
coeftest(model2_ols, vcovHC(model2_ols, type = "HC1"))
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
library(sandwich)
model2_ols <- lm(flu ~ flushot + genderchild + nationality + agemother + educmother + married + housincome, data = subset(data, data$treatgroup == 1))
coeftest(model2_ols, vcovHC(model2_ols, type = "HC1"))
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
library(sandwich)
library(lmtest)
model2_ols <- lm(flu ~ flushot + genderchild + nationality + agemother + educmother + married + housincome, data = subset(data, data$treatgroup == 1))
coeftest(model2_ols, vcovHC(model2_ols, type = "HC1"))
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
library(car)
linearHypothesis(model2_robust, c("genderchild=0", "nationality=0", "agemother=0", "educmother=0", "married=0", "housincome=0"))
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
library(car)
balance <- balance_table(data[, !names(data) %in% c("treatgroup", "flushot", "treatedT", "untreatedT")], "treatment")
round(balance, digits = 4)
balance <- balance_table(data[, !names(data) %in% c("treatgroup", "flushot", "treatedT", "untreatedT")], "treatment")
balance
knitr::opts_chunk$set(echo = TRUE)
library(RCT)
library(MASS)
library(stargazer)
library(fixest)
library(car)
q <- mean(data[data$treatgroup == 0, 'flu'])
sigma = (1-q)*q
sigma
