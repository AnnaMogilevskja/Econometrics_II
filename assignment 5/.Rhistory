knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(fixest)
library(car)
# Load data
data <- read.csv("assignment5.csv")
View(data)
# Load data
data <- read.csv("assignment5.csv")
View(data)
ex1 <- data[data$treated == 1,] %>%
group_by(year) %>%
summarise(mean_year_treated = mean(lnm_rate))
ex2 <- data[data$treated == 0,] %>%
group_by(year) %>%
summarise(mean_year_untreated = mean(lnm_rate))
means = merge(x=ex1,y=ex2,by="year")
head(means)
plot(means$year, means$mean_year_treated,type="l",col="blue", ylim=c(-13,-7))
points(means$year, means$mean_year_untreated,type="l",col="orange")
means[means$year == 1936 | means$year == 1937, ]
treated_dif <- means$mean_year_treated[means$year == 1937] -
means$mean_year_treated[means$year == 1936]
control_dif <- means$mean_year_untreated[means$year == 1937] -
means$mean_year_untreated[means$year == 1936]
did <- treated_dif - control_dif
data$year_control <- ifelse(data$year == 1937, 1, 0)
data$post <- ifelse(data$year >= 1937, 1, 0)
data$D <- data$post*data$treated
m1 <- feols(lnm_rate ~ D | treated + year, data = subset(data, data$year == 1936| data$year == 1937),
se = 'standard')
summary(m1)
m2 <- feols(lnm_rate ~ D | treated + year, data,
se = 'standard')
summary(m2)
m3 <- feols(lnm_rate ~ treated*i(year, ref = 1936) | treated + year, data,
se = 'standard')
summary(m3)
m1_clustered <- feols(lnm_rate ~ D | treated + year, data = subset(data, data$year == 1936| data$year == 1937),
cluster = 'state')
summary(m1_clustered)
m2_clustered <- feols(lnm_rate ~ D | treated + year, data,
cluster = 'state')
summary(m2_clustered)
m3_clustered <- feols(lnm_rate ~ treated*i(year, ref = 1936) | treated + year, data,
cluster = 'state')
summary(m3_clustered)
linearHypothesis(m3_clustered, c("treated:year::1925=0", "treated:year::1926=0", "treated:year::1927=0", "treated:year::1928=0",
"treated:year::1929=0", "treated:year::1930=0", "treated:year::1931=0", "treated:year::1932=0", "treated:year::1933=0", "treated:year::1934=0", "treated:year::1935=0"))
?rlm?
?rlm
?rlm
library(MASS)
?rlm
View(m2)
View(m3)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(fixest)
library(car)
library()
plot(m3$coefficients)
rlm
plot(m3$coefficients, type='l')
plot(m3$coefficients, type='l', xlab='')
plot(m3$collin.var, m3$coefficients, type='l')
plot(m3$coefficients, type='l', xlab="")
plot(m3$coefficients, type='l', xlab="")
axis(side=1,data$year)
linearHypothesis(m3, c("treated:year::1925=0", "treated:year::1926=0", "treated:year::1927=0", "treated:year::1928=0",
"treated:year::1929=0", "treated:year::1930=0", "treated:year::1931=0", "treated:year::1932=0", "treated:year::1933=0", "treated:year::1934=0", "treated:year::1935=0"))
